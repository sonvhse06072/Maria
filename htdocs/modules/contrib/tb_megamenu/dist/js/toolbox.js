Drupal.TBMegaMenu=Drupal.TBMegaMenu||{},function(t,a,e){"use strict";a.behaviors.tbMegaMenuBackendAction={attach:function(a){t('select[name="tbm-animation"]').change((function(){t("#tbm-duration-wrapper").css({display:"none"==t(this).val()?"none":"inline-block"}),t("#tbm-delay-wrapper").css({display:"none"==t(this).val()?"none":"inline-block"})})),t(".tbm-column-inner .close").click((function(){t(this).parent().html("")})),void 0!==e.TBMegaMenu.menu_name&&t("#tbm-admin-mm-container").megamenuAdmin({menu_name:e.TBMegaMenu.menu_name})}};var n,i,s,l,o,r,d=null;a.TBMegaMenu.lockedAjax=!1,a.TBMegaMenu.lockAjax=function(){a.TBMegaMenu.lockedAjax=!0},a.TBMegaMenu.isLockedAjax=function(){return a.TBMegaMenu.lockedAjax},a.TBMegaMenu.releaseAjax=function(){a.TBMegaMenu.lockedAjax=!1},t.fn.megamenuAdmin=function(a){return a=t.extend({},a),n=t(this).find(".tbm"),i=n.find('ul[class*="level"]>li>:first-child'),s=n.find(".tbm-item-child"),l=n.find('[class*="span"]'),o=i.add(s).add(l),i.each((function(){var a=t(this),e=a.closest("li");1==e.attr("data-hidesub")&&(e.find(".tbm-item-child:first").css("display","none"),a.removeClass("tbm-toggle").attr("data-toggle",""),e.removeClass("tbm-item--has-dropdown tbm-item--has-flyout"))})),b(!0),k(o),t(".toolbox-action, .toolbox-toggle, .toolbox-input").unbind("focus blur click change keydown"),t(".tbm-admin-mm-row").click((function(t){t.stopPropagation()})),t(document.body).click((function(t){b(!0)})),t(".back-megamenu-toolbox").click((function(t){b(!0)})),t(".toolbox-action").click((function(e){var n=t(this).attr("data-action");return n&&(c.datas=t(this).data(),c[n](a)),e.stopPropagation(),!1})),t(".toolbox-toggle").change((function(e){var n=t(this).attr("data-action");return n&&(c.datas=t(this).data(),c[n](a)),e.stopPropagation(),!1})),t(".toolbox-input").bind("focus blur click",(function(t){return t.stopPropagation(),!1})),t(".toolbox-input").bind("keydown",(function(t){"13"==t.keyCode&&(v(this),t.preventDefault())})),t(".toolbox-input").change((function(t){return v(this),t.stopPropagation(),!1})),this};var c={data:{},toggleSub:function(){if(d){var a=d.closest("li"),n=a.find(".tbm-item-child:first");if(!parseInt(a.attr("data-group"))){if(0==n.length||"none"==n.css("display")){if(0==n.length){var i=++e.TBMegaMenu.TBElementsCounter.column;n=t('<div class="tbm-submenu tbm-item-child"><div class="tbm-row"><div id=tbm-column-'+i+' class="span12" data-width="12"><div class="tbm-column-inner"></div></div></div></div>').appendTo(a),k(n.find('[class*="span"]'))}else n.css("display",""),a.attr("data-hidesub",0);a.attr("data-group",0),d.addClass("tbm-toggle").attr("data-toggle","tbm-item--has-dropdown"),a.addClass(1==a.attr("data-level")?"tbm-item--has-dropdown":"tbm-item--has-flyout"),k(n)}else C(n),a.find("ul.level-"+a.attr("data-level")).length>0?(n.css("display","none"),a.attr("data-hidesub",1)):n.remove(),a.attr("data-group",0),d.removeClass("tbm-toggle").attr("data-toggle",""),a.removeClass("tbm-item--has-dropdown tbm-item--has-flyout");p()}}},toggleHideMobileMenu:function(){var a=t(".toolitem-hide-mobile-menu");a.find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(a.attr("data-hide-mobile-menu"))?(f(a,0),a.attr("data-hide-mobile-menu",0)):(f(a,1),a.attr("data-hide-mobile-menu",1))},toggleAutoArrow:function(){var a=t(".toolitem-auto-arrow");a.find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(a.attr("data-auto-arrow"))?(f(a,0),a.attr("data-auto-arrow",0)):(f(a,1),a.attr("data-auto-arrow",1))},toggleAlwayShowSubmenu:function(){var a=t(".toolitem-always-show-submenu");a.find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(a.attr("data-always-show-submenu"))?(f(a,0),a.attr("data-always-show-submenu",0)):(f(a,1),a.attr("data-always-show-submenu",1))},showBlockTitle:function(){if(d){var a=t(".toolcol-showblocktitle");if(a.find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(d.attr("data-showblocktitle"))?(f(a,0),d.attr("data-showblocktitle",0)):(f(a,1),d.attr("data-showblocktitle",1)),""!=t('#tbm-block-wrapper select[name="toolcol-block"]').val()){var e=t('#tbm-block-wrapper select[name="toolcol-block"]').val();t("#tbm-admin-mm-tb #toolbox-loading").show(),g({action:"load_block",block_id:e,id:d.attr("id"),showblocktitle:parseInt(d.attr("data-showblocktitle"))})}}},toggleGroup:function(){if(d){var t=d.parent(),a=t.find(".tbm-item-child:first");1!=t.attr("data-level")&&(parseInt(t.attr("data-group"))?(t.attr("data-group",0),t.removeClass("tbm-group").addClass("tbm-item--has-flyout"),d.addClass("tbm-toggle").attr("data-toggle","tbm-item--has-dropdown"),a.removeClass("tbm-group-container").addClass("tbm-submenu"),a.css("width",a.attr("data-width")),M(a)):(d.removeClass("tbm-toggle").attr("data-toggle",""),t.attr("data-group",1),t.removeClass("tbm-item--has-flyout").addClass("tbm-group"),a.removeClass("tbm-submenu").addClass("tbm-group-container"),a.css("width",""),M(a)),p())}},hideWhenCollapse:function(){if(d){var t=u();if("sub"==t){var a=d.closest("li");parseInt(a.attr("data-hidewcol"))?(a.attr("data-hidewcol",0),a.removeClass("sub-hidden-collapse")):(a.attr("data-hidewcol",1),a.addClass("sub-hidden-collapse"))}else"col"==t&&(parseInt(d.attr("data-hidewcol"))?(d.attr("data-hidewcol",0),d.removeClass("hidden-collapse")):(d.attr("data-hidewcol",1),d.addClass("hidden-collapse")));p()}},alignment:function(){var t=d.closest("li");t.removeClass("tbm-left tbm-center tbm-right tbm-justify").addClass("tbm-"+c.datas.align),"justify"==c.datas.align?(d.addClass("span12"),d.css("width","")):(d.removeClass("span12"),d.attr("data-width")&&d.css("width",d.attr("data-width"))),t.attr("data-alignsub",c.datas.align),p()},moveItemsLeft:function(){if(d){var a=d.closest("li"),e=a.parent().closest("li"),n=e.attr("data-level"),i=a.closest('[class*="span"]'),s=i.find("ul:first > li"),l=s.index(a),o=s.slice(0,l+1),r=s.length-o.length,m=i.parent().parent().children('[class*="row"]'),u=m.children('[class*="span"]').filter((function(){return!t(this).attr("data-block")})),b=u.index(i);if(e.length){if(0==b){var h=d;d=i,c.datas.addfirst=!0,c.addColumn(),u=m.children('[class*="span"]').filter((function(){return!t(this).attr("data-block")})),d=h,b++}var f=t(u[b-1]),v=f.find("ul:first");v.length||(v=t('<ul class="level'+n+' tbm-subnav">').appendTo(f.children(".tbm-column-inner"))),o.appendTo(v),0==r&&i.find("ul:first").remove(),p()}}},moveItemsRight:function(){if(d){var a=d.closest("li"),e=a.parent().closest("li"),n=e.attr("data-level"),i=a.closest('[class*="span"]'),s=i.find("ul:first > li"),l=s.index(a),o=s.slice(l),r=s.length-o.length,m=i.parent().parent().children('[class*="row"]'),u=m.children('[class*="span"]').filter((function(){return 0==t(this).children(".tbm-column-inner").children(".tbm-block").length})),b=u.index(i);if(e.length){if(b==u.length-1){var p=d;d=i,c.datas.addfirst=!1,c.addColumn(),u=m.children('[class*="span"]').filter((function(){return 0==t(this).children(".tbm-column-inner").children(".tbm-block").length})),d=p}var f=t(u[b+1]),v=f.find(".tbm-column-inner ul.tbm-subnav:first");v.length||(v=t('<ul class="level'+n+' tbm-subnav">').appendTo(f.children(".tbm-column-inner"))),o.prependTo(v),0==r&&i.find("ul:first").remove(),h(d)}}},addRow:function(){if(d){var a=++e.TBMegaMenu.TBElementsCounter.column,n=t('<div class="tbm-row"><div id=tbm-column-'+a+' class="span12"><div class="tbm-column-inner"></div></div></div>').appendTo(d.find('[class*="row"]:first').parent()).children();k(n),d=null,h(n)}},rowUp:function(){if(d){var a=t(d.closest(".tbm-row")),e=a.parent(),r=a.prev();if(0!=r.length){var c=a.clone(),m=r.clone();a.replaceWith(m),r.replaceWith(c),n=t("#tbm-admin-mm-container").find(".tbm"),i=n.find('ul[class*="level"]>li>:first-child'),s=n.find(".tbm-item-child"),l=n.find('[class*="span"]'),o=i.add(s).add(l),k(o),d=e.find(".selected")}}},rowDown:function(){if(d){var a=t(d.closest(".tbm-row")),e=a.parent(),r=a.next();if(0!=r.length){var c=a.clone(),m=r.clone();a.replaceWith(m),r.replaceWith(c),n=t("#tbm-admin-mm-container").find(".tbm"),i=n.find('ul[class*="level"]>li>:first-child'),s=n.find(".tbm-item-child"),l=n.find('[class*="span"]'),o=i.add(s).add(l),k(o),d=e.find(".selected")}}},addColumn:function(){if(d){var a=d.parent().children('[class*="span"]'),n=a.length+1,i=w(n),s=++e.TBMegaMenu.TBElementsCounter.column,l=t("<div id=tbm-column-"+s+'><div class="tbm-column-inner"></div></div>');c.datas.addfirst?l.prependTo(d.parent()):l.insertAfter(d),a=a.add(l),k(l),a.each((function(a){t(this).removeClass("span"+t(this).attr("data-width")).addClass("tbm-column span"+i[a]).attr("data-width",i[a])})),h(l)}},removeColumn:function(){if(d){var a=d,e=a.parent(),n=e.parent().children('[class*="row"]').children('[class*="span"]'),i=n.filter((function(){return!t(this).attr("data-block")})),s=n.filter((function(){return t(this).attr("data-block")})).length,l=e.children('[class*="span"]'),o=l.length-1,r=w(o),c=!a.attr("data-block");if(c&&(!s&&1==i.length||s&&0==i.length)||1==n.length)h(t(d).closest(".tbm-item")),(d=t(d).closest(".tbm-item")).find(".tbm-submenu").remove();else{if(c){var m=0==(u=i.index(a))?i[1]:i[u-1];a.find("ul:first > li").appendTo(t(m).find("ul:first"))}var u,b=0==(u=n.index(a))?n[1]:n[u-1];o<1?e.remove():((l=l.not(a)).each((function(a){t(this).removeClass("span"+t(this).attr("data-width")).addClass("span"+r[a]).attr("data-width",r[a])})),a.remove()),h(t(b))}}},resetConfig:function(n){a.TBMegaMenu.isLockedAjax()?window.setTimeout((function(){c.resetConfig(n)}),200):(a.TBMegaMenu.lockAjax(),t("#tbm-admin-mm-tb #toolbox-message").html("").hide(),t("#tbm-admin-mm-tb #toolbox-loading").show(),t.ajax({type:"POST",url:e.TBMegaMenu.saveConfigURL,contentType:"application/json; charset=utf-8",data:JSON.stringify({action:"load",theme:e.TBMegaMenu.theme,menu_name:n.menu_name}),complete:function(e){switch(e.status){case 0:case 500:var i=e.responseText||a.t("@status reverting changes.",{"@status":x(e.statusText)});break;default:t("#tbm-admin-mm-container").html(e.responseText).megamenuAdmin({menu_name:n.menu_name}),t("#tbm-admin-mm-container").find(".tbm-column-inner").children("span.close").click((function(){t(this).parent().html("")})),i=a.t("All unsaved changes have been reverted.")}m(e.status,i),a.TBMegaMenu.releaseAjax()}}))},saveConfig:function(i){if(a.TBMegaMenu.isLockedAjax())window.setTimeout((function(){c.saveConfig(i)}),200);else{a.TBMegaMenu.lockAjax();var s={};n.find('ul[class*="level"] > li').each((function(){var a=t(this),e=a.attr("data-id"),n=[],i=parseInt(a.attr("data-level"));a.find(".tbm-item-child:first").find('[class*="row"]:first').parent().children('[class*="row"]').each((function(){var a=t(this).children('[class*="span"]'),e=[];a.each((function(){var a={};a.width=t(this).attr("data-width")?t(this).attr("data-width"):"",a.class=t(this).attr("data-class")?t(this).attr("data-class"):"",a.hidewcol=t(this).attr("data-hidewcol")?t(this).attr("data-hidewcol"):"",a.showblocktitle=t(this).attr("data-showblocktitle")?t(this).attr("data-showblocktitle"):"1";var n={col_content:[],col_config:a};t(this).find('ul[class*="level"] > li').each((function(){if(parseInt(t(this).attr("data-level"))==i+1){var a={};a.plugin_id=t(this).attr("data-id"),a.type=t(this).attr("data-type"),a.tb_item_config={},n.col_content.push(a)}})),t(this).children(".tbm-column-inner").children(".tbm-block").each((function(){var a={};a.block_id=t(this).attr("data-block"),a.type=t(this).attr("data-type"),a.tb_item_config={},n.col_content.push(a)})),n.col_content.length&&e.push(n)})),e.length&&n.push(e)}));var l={};l.width=a.children(".tbm-submenu").attr("data-width")?a.children(".tbm-submenu").attr("data-width"):"",l.class=a.children(".tbm-submenu").attr("data-class")?a.children(".tbm-submenu").attr("data-class"):"",l.group=a.attr("data-group")?a.attr("data-group"):0;var o={};o.class=a.attr("data-class")?a.attr("data-class"):"",o.xicon=a.attr("data-xicon")?a.attr("data-xicon"):"",o.caption=a.attr("data-caption")?a.attr("data-caption"):"",o.alignsub=a.attr("data-alignsub")?a.attr("data-alignsub"):"",o.group=a.attr("data-group")?a.attr("data-group"):"",o.hidewcol=a.attr("data-hidewcol")?a.attr("data-hidewcol"):1,o.hidesub=a.attr("data-hidesub")?a.attr("data-hidesub"):1,o.label=a.attr("data-label")?a.attr("data-label"):"";var r={rows_content:n,submenu_config:l,item_config:o};s[e]=r}));var l={};l.animation=t('select[name="tbm-animation"]').val(),l.duration=parseInt(t('input[name="tbm-duration"]').val()),l.delay=parseInt(t('input[name="tbm-delay"]').val()),l.breakpoint=parseInt(t('input[name="tbm-breakpoint"]').val()),l["hide-mobile-menu"]=t("#tbm-admin-mm-intro .toolitem-hide-mobile-menu").attr("data-hide-mobile-menu"),l["auto-arrow"]=t("#tbm-admin-mm-intro .toolitem-auto-arrow").attr("data-auto-arrow"),l["always-show-submenu"]=t("#tbm-admin-mm-intro .toolitem-always-show-submenu").attr("data-always-show-submenu"),l["number-columns"]=e.TBMegaMenu.TBElementsCounter.column,t("#tbm-admin-mm-tb #toolbox-message").html("").hide(),t("#tbm-admin-mm-tb #toolbox-loading").show(),t.ajax({type:"POST",url:e.TBMegaMenu.saveConfigURL,contentType:"application/json; charset=utf-8",data:JSON.stringify({action:"save",theme:e.TBMegaMenu.theme,menu_name:i.menu_name,menu_config:s,block_config:l}),complete:function(t){var e=t.responseText||a.t("@status saving changes.",{"@status":x(t.statusText)});m(t.status,e),a.TBMegaMenu.releaseAjax()}})}}},m=function(a,e){switch(clearTimeout(r),t("#tbm-admin-mm-tb #toolbox-message").html("").hide(),a){case 0:case 500:var n="messages--error";break;default:n="messages--status"}t("#tbm-admin-mm-tb #toolbox-loading").hide();var i=t('<div class="messages '+n+'" role="contentinfo" aria-label="Status message"><h2 class="visually-hidden">Status message</h2><span class="close fa fa-times-circle" title="Dismiss this message">&nbsp;</span>'+e+"</div>");t("#tbm-admin-mm-tb #toolbox-message").html(i).show(),t("#tbm-admin-mm-tb #toolbox-message span.close").click((function(){t(this).parent().html("").hide()})),200==a&&(r=window.setTimeout((function(){t("#tbm-admin-mm-tb #toolbox-message").html("").hide()}),7e3))},u=function(){return!!d&&(d.hasClass("tbm-item-child")?"sub":"DIV"==d[0].tagName?"col":"item")},b=function(a){t("#tbm-admin-mm-tb .admin-toolbox").hide(),d=null,n&&n.data("nav_all")&&n.data("nav_all").removeClass("selected"),n.find("li").removeClass("open"),a?t("#tbm-admin-mm-intro").show():t("#tbm-admin-mm-intro").hide()},h=function(a){a.hasClass("tbm-column")||a.hasClass("tbm-submenu")||(parseInt(t(a).parent().attr("data-level"))>1?(t("#toogle-group-wrapper").show(),t("#toogle-break-column-wrapper").show()):(t("#toogle-group-wrapper").hide(),t("#toogle-break-column-wrapper").hide())),b(!1),a&&(d=a),n.find('ul[class*="level"] > li').each((function(){!t(this).has(d).length>0?t(this).removeClass("open"):t(this).addClass("open")})),n.data("nav_all").removeClass("selected"),d.addClass("selected");var e=u();t("#tbm-admin-mm-tool"+e).show(),p(e),t("#tbm-admin-mm-tb").show()},p=function(a){switch(a||(a=u()),t("#tbm-admin-mm-tb .disabled").removeClass("disabled"),t("#tbm-admin-mm-tb .active").removeClass("active"),a){case"item":var e=(i=d.closest("li")).parent().closest("li"),n=i.find(".tbm-item-child:first");t(".toolitem-exclass").val(i.attr("data-class")),t(".toolitem-xicon").val(i.attr("data-xicon")),t(".toolitem-caption").val(i.attr("data-caption")),(s=t(".toolitem-sub")).find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(i.attr("data-group"))?s.addClass("disabled"):0==n.length||"none"==n.css("display")?f(s,0):f(s,1),(s=t(".toolitem-group")).find("label").removeClass("active btn-success btn-danger btn-primary"),1==parseInt(i.attr("data-level"))||0==n.length||1==parseInt(i.attr("data-hidesub"))?t(".toolitem-group").addClass("disabled"):parseInt(i.attr("data-group"))?f(s,1):f(s,0),e.length&&e.hasClass("tbm-item")||t(".toolitem-moveleft, .toolitem-moveright").addClass("disabled");break;case"sub":var i=d.closest("li");t(".toolsub-exclass").attr("value",d.attr("data-class")||""),parseInt(i.attr("data-group"))?(t(".toolsub-width").attr("value","").addClass("disabled"),t(".toolitem-alignment").addClass("disabled")):(t(".toolsub-width").val(d.attr("data-width")),parseInt(i.attr("data-level"))>1&&(t(".toolsub-align-center").addClass("disabled"),t(".toolsub-align-justify").addClass("disabled")),i.attr("data-alignsub")&&(t(".toolsub-align-"+i.attr("data-alignsub")).addClass("active"),"justify"==i.attr("data-alignsub")&&t(".toolsub-width").addClass("disabled"))),(s=t(".toolsub-hidewhencollapse")).find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(i.attr("data-hidewcol"))?f(s,1):f(s,0);break;case"col":var s;t(".toolcol-block").val(d.children(".tbm-column-inner").children(".tbm-block").attr("data-block")||""),t(".toolcol-width").val(d.attr("data-width")||""),t(".toolcol-exclass").attr("value",d.attr("data-class")||""),d.find(".tbm-subnav").length>0&&t(".toolcol-block").parent().addClass("disabled"),1==d.parent().children().length&&t(".toolcol-width").parent().addClass("disabled"),(s=t(".toolcol-hidewhencollapse")).find("label").removeClass("active btn-success btn-danger btn-primary"),parseInt(d.attr("data-hidewcol"))?f(s,1):f(s,0),(s=t(".toolcol-showblocktitle")).find("label").removeClass("active btn-success btn-danger btn-primary"),!d.attr("data-showblocktitle")||parseInt(d.attr("data-showblocktitle"))?f(s,1):f(s,0)}},f=function(t,a){var e=t.find('input[value="'+a+'"]');e.prop("checked",!0),e.trigger("update")},v=function(e){var n=t(e).attr("data-name"),i=e.value,s=u();switch(n){case"width":i=parseInt(i),isNaN(i)?(i="","sub"==s&&d.width(i),"col"==s&&d.removeClass("span"+d.attr("data-"+n)),d.attr("data-"+n,i)):("sub"==s&&d.width(i),"col"==s&&d.removeClass("span"+d.attr("data-"+n)).addClass("span"+i),d.attr("data-"+n,i)),t(e).val(i);break;case"duration":case"delay":i=parseInt(i),isNaN(i)&&(i=""),t(e).val(i);break;case"class":if("item"==s)var l=d.closest("li");else l=d;l.removeClass(l.attr("data-"+n)||"").addClass(i),l.attr("data-"+n,i);break;case"xicon":if("item"==s){d.closest("li").attr("data-"+n,i),d.find("i").remove();var o=a.checkPlain(i);i&&d.prepend(t('<i class="'+o+'"></i>'))}break;case"caption":"item"==s&&(d.closest("li").attr("data-"+n,i),d.find("span.tbm-caption").remove(),o=a.checkPlain(i),i&&d.append(t('<span class="tbm-caption">'+o+"</span>")));break;case"block":0==d.find('ul[class*="level"]').length&&(i?(t("#tbm-admin-mm-tb #toolbox-loading").show(),g({action:"load_block",block_id:i,id:d.attr("id"),showblocktitle:parseInt(d.attr("data-showblocktitle"))})):d.find(".tbm-column-inner").html(""),d.attr("data-"+n,i))}},g=function(n){a.TBMegaMenu.isLockedAjax()?window.setTimeout((function(){g(n)}),200):(a.TBMegaMenu.lockAjax(),"load_block"===n.action&&t.ajax({type:"POST",url:e.TBMegaMenu.saveConfigURL,contentType:"application/json; charset=utf-8",data:JSON.stringify(n),complete:function(e){var n=!0;try{var i=t.parseJSON(e.responseText)}catch(t){n=!1}if(n){var s=i.content?i.content:"",l=i.id?i.id:"",o=t('<span class="close fa fa-times-circle" title="'+a.t("Remove this block")+'">&nbsp;</span>'),r=t("#"+l);r.length&&(r.children(".tbm-column-inner").html("").append(o).append(t(s)).find(":input").removeAttr("name"),r.children(".tbm-column-inner").children("span.close").click((function(){t(this).parent().html("")}))),t("#tbm-admin-mm-tb #toolbox-loading").hide()}else{var d=e.responseText||a.t("@status performaing ajax calls.",{"@status":x(e.statusText)});m(e.status,d)}a.TBMegaMenu.releaseAjax()}}))},w=function(t){if(t<1)return null;for(var a=Math.floor(12/t),e=[],n=0;n<t;n++)e[n]=a;return e[t-1]=12-a*(t-1),e},k=function(a){n.data("nav_all")?n.data("nav_all",n.data("nav_all").add(a)):n.data("nav_all",a),a.mouseover((function(a){n.data("nav_all").removeClass("hover");var e=t(this);clearTimeout(n.attr("data-hovertimeout")),n.attr("data-hovertimeout",setTimeout((function(){e.addClass("hover")}),100)),a.stopPropagation()})),a.mouseout((function(a){clearTimeout(n.attr("data-hovertimeout")),t(this).removeClass("hover")})),a.click((function(a){return h(t(this)),a.stopPropagation(),!1}))},C=function(t){n.data("nav_all",n.data("nav_all").not(t)),t.unbind("mouseover").unbind("mouseout").unbind("click")},M=function(t){C(t),k(t)},x=function(t){return t.charAt(0).toUpperCase()+t.slice(1)};t.extend(a.TBMegaMenu,{prepare:function(){t("#tbm-admin").removeClass("hidden")},tb_megamenu:function(a,e,n,i){t("#tbm-admin-mm-container").html(i).megamenuAdmin().find(":input").removeAttr("name")},initPanel:function(){t("#jform_params_mm_panel").hide()},initPreSubmit:function(){var a=document.adminForm;if(!a)return!1;var e=a.onsubmit;a.onsubmit=function(a){t(".toolbox-saveConfig").trigger("click"),t.isfunction(e)&&e()}},initRadioGroup:function(){var a=t(".tbm-admin");a.find(".radio.btn-group label").addClass("btn"),a.find(".btn-group label").unbind("click").click((function(){var a=t(this),e=t("#"+a.attr("for"));e.attr("checked")||(a.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),a.addClass("active "+(""==e.val()?"btn-primary":0==e.val()?"btn-danger":"btn-success")),e.attr("checked",!0).trigger("change"))})),a.find("input[type=radio]").bind("update",(function(){this.checked&&t(this).closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary").filter('[for="'+this.id+'"]').addClass("active "+(""==t(this).val()?"btn-primary":0==t(this).val()?"btn-danger":"btn-success"))})),a.find(".btn-group input[checked=checked]").each((function(){""==t(this).val()?t("label[for="+t(this).attr("id")+"]").addClass("active btn-primary"):0==t(this).val()?t("label[for="+t(this).attr("id")+"]").addClass("active btn-danger"):t("label[for="+t(this).attr("id")+"]").addClass("active btn-success")}))}}),t(window).on("load",(function(){a.TBMegaMenu.initPanel(),a.TBMegaMenu.initPreSubmit(),a.TBMegaMenu.initRadioGroup(),a.TBMegaMenu.prepare()}))}(jQuery,Drupal,drupalSettings);